<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TTS Service Demo</title>
  </head>
  <body>
    <h1>TTS Service Demo</h1>
    <label for="text-input">Text to Synthesize:</label>
    <textarea id="text-input" rows="4" cols="50"></textarea>
    <br>
    <label for="gender-select">Voice Gender:</label>
    <select id="gender-select">
      <option value="female">Female</option>
      <option value="male">Male</option>
    </select>
    <br>
    <label for="rate-select">Speech Rate:</label>
    <select id="rate-select">
      <option value="+20%">Fast</option>
      <option value="+0%">Normal</option>
      <option value="-20%">Slow</option>
    </select>
    <br>
    <button id="synthesize-button" onclick="synthesize()">Synthesize Speech</button>
    <br>
    <audio id="audio-element" controls></audio>
    <script>
      async function synthesize() {
        const textInput = document.getElementById("text-input").value;
        const genderSelect = document.getElementById("gender-select");
        const gender = genderSelect.options[genderSelect.selectedIndex].value;
        const rateSelect = document.getElementById("rate-select");
        const rate = rateSelect.options[rateSelect.selectedIndex].value;
        const data = {
          "text": textInput,
          "gender": gender,
          "rate": rate
        };
        const response = await fetch("https://edge-speak2.westeurope.cloudapp.azure.com/tts", {
          method: "POST",
          body: JSON.stringify(data),
          headers: {"Content-Type": "application/json"}
        });
        const blob = await response.blob();
        const audioElement = document.getElementById("audio-element");
        audioElement.src = URL.createObjectURL(blob);
        audioElement.play();
      }
    </script>
  </body>
</html>
